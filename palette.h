#ifndef PALETTE_H
#define PALETTE_H

#include "rgb.h"
#include "range.h"

class Palette {
public:
  struct Key {
    Key(double val, const FRGB& color) : val(val), color(color) {}
    double val;
    FRGB color;
  };

  void addKey(const Key& key) {
    keys.push_back(key);
  }

  FRGB color(double val) const {
    for (int i = 0; i < keys.size(); ++i) {
      if (val < keys[i].val) {
        if (i == 0) {
          return keys[0].color;
        }
        const Key& a = keys[i - 1];
        const Key& b = keys[i];
        double alpha = interpolate(val, Range(a.val, b.val), Range());
        return interpolate_rgbs(alpha, a.color, b.color);
      }
    }
    return keys[keys.size() - 1].color;
  }

  static Palette Veridis() {
    Palette p;
    p.addKey(Key(0.0, FRGB(0, 32, 76)));
    p.addKey(Key(0.00392156862745098, FRGB(0, 32, 78)));
    p.addKey(Key(0.00784313725490196, FRGB(0, 33, 80)));
    p.addKey(Key(0.011764705882352941, FRGB(0, 34, 81)));
    p.addKey(Key(0.01568627450980392, FRGB(0, 35, 83)));
    p.addKey(Key(0.0196078431372549, FRGB(0, 35, 85)));
    p.addKey(Key(0.023529411764705882, FRGB(0, 36, 86)));
    p.addKey(Key(0.027450980392156862, FRGB(0, 37, 88)));
    p.addKey(Key(0.03137254901960784, FRGB(0, 38, 90)));
    p.addKey(Key(0.03529411764705882, FRGB(0, 38, 91)));
    p.addKey(Key(0.0392156862745098, FRGB(0, 39, 93)));
    p.addKey(Key(0.043137254901960784, FRGB(0, 40, 95)));
    p.addKey(Key(0.047058823529411764, FRGB(0, 40, 97)));
    p.addKey(Key(0.050980392156862744, FRGB(0, 41, 99)));
    p.addKey(Key(0.054901960784313725, FRGB(0, 42, 100)));
    p.addKey(Key(0.058823529411764705, FRGB(0, 42, 102)));
    p.addKey(Key(0.06274509803921569, FRGB(0, 43, 104)));
    p.addKey(Key(0.06666666666666667, FRGB(0, 44, 106)));
    p.addKey(Key(0.07058823529411765, FRGB(0, 45, 108)));
    p.addKey(Key(0.07450980392156863, FRGB(0, 45, 109)));
    p.addKey(Key(0.0784313725490196, FRGB(0, 46, 110)));
    p.addKey(Key(0.08235294117647059, FRGB(0, 46, 111)));
    p.addKey(Key(0.08627450980392157, FRGB(0, 47, 111)));
    p.addKey(Key(0.09019607843137255, FRGB(0, 47, 111)));
    p.addKey(Key(0.09411764705882353, FRGB(0, 48, 111)));
    p.addKey(Key(0.09803921568627451, FRGB(0, 49, 111)));
    p.addKey(Key(0.10196078431372549, FRGB(0, 49, 111)));
    p.addKey(Key(0.10588235294117647, FRGB(0, 50, 110)));
    p.addKey(Key(0.10980392156862745, FRGB(0, 51, 110)));
    p.addKey(Key(0.11372549019607843, FRGB(0, 52, 110)));
    p.addKey(Key(0.11764705882352941, FRGB(0, 52, 110)));
    p.addKey(Key(0.12156862745098039, FRGB(1, 53, 110)));
    p.addKey(Key(0.12549019607843137, FRGB(6, 54, 110)));
    p.addKey(Key(0.12941176470588237, FRGB(10, 55, 109)));
    p.addKey(Key(0.13333333333333333, FRGB(14, 55, 109)));
    p.addKey(Key(0.13725490196078433, FRGB(18, 56, 109)));
    p.addKey(Key(0.1411764705882353, FRGB(21, 57, 109)));
    p.addKey(Key(0.1450980392156863, FRGB(23, 57, 109)));
    p.addKey(Key(0.14901960784313725, FRGB(26, 58, 108)));
    p.addKey(Key(0.15294117647058825, FRGB(28, 59, 108)));
    p.addKey(Key(0.1568627450980392, FRGB(30, 60, 108)));
    p.addKey(Key(0.1607843137254902, FRGB(32, 60, 108)));
    p.addKey(Key(0.16470588235294117, FRGB(34, 61, 108)));
    p.addKey(Key(0.16862745098039217, FRGB(36, 62, 108)));
    p.addKey(Key(0.17254901960784313, FRGB(38, 62, 108)));
    p.addKey(Key(0.17647058823529413, FRGB(39, 63, 108)));
    p.addKey(Key(0.1803921568627451, FRGB(41, 64, 107)));
    p.addKey(Key(0.1843137254901961, FRGB(43, 65, 107)));
    p.addKey(Key(0.18823529411764706, FRGB(44, 65, 107)));
    p.addKey(Key(0.19215686274509805, FRGB(46, 66, 107)));
    p.addKey(Key(0.19607843137254902, FRGB(47, 67, 107)));
    p.addKey(Key(0.2, FRGB(49, 68, 107)));
    p.addKey(Key(0.20392156862745098, FRGB(50, 68, 107)));
    p.addKey(Key(0.20784313725490197, FRGB(51, 69, 107)));
    p.addKey(Key(0.21176470588235294, FRGB(53, 70, 107)));
    p.addKey(Key(0.21568627450980393, FRGB(54, 70, 107)));
    p.addKey(Key(0.2196078431372549, FRGB(55, 71, 107)));
    p.addKey(Key(0.2235294117647059, FRGB(56, 72, 107)));
    p.addKey(Key(0.22745098039215686, FRGB(58, 73, 107)));
    p.addKey(Key(0.23137254901960785, FRGB(59, 73, 107)));
    p.addKey(Key(0.23529411764705882, FRGB(60, 74, 107)));
    p.addKey(Key(0.23921568627450981, FRGB(61, 75, 107)));
    p.addKey(Key(0.24313725490196078, FRGB(62, 75, 107)));
    p.addKey(Key(0.24705882352941178, FRGB(64, 76, 107)));
    p.addKey(Key(0.25098039215686274, FRGB(65, 77, 107)));
    p.addKey(Key(0.2549019607843137, FRGB(66, 78, 107)));
    p.addKey(Key(0.25882352941176473, FRGB(67, 78, 107)));
    p.addKey(Key(0.2627450980392157, FRGB(68, 79, 107)));
    p.addKey(Key(0.26666666666666666, FRGB(69, 80, 107)));
    p.addKey(Key(0.27058823529411763, FRGB(70, 80, 107)));
    p.addKey(Key(0.27450980392156865, FRGB(71, 81, 107)));
    p.addKey(Key(0.2784313725490196, FRGB(72, 82, 107)));
    p.addKey(Key(0.2823529411764706, FRGB(73, 83, 107)));
    p.addKey(Key(0.28627450980392155, FRGB(74, 83, 107)));
    p.addKey(Key(0.2901960784313726, FRGB(75, 84, 107)));
    p.addKey(Key(0.29411764705882354, FRGB(76, 85, 107)));
    p.addKey(Key(0.2980392156862745, FRGB(77, 85, 107)));
    p.addKey(Key(0.30196078431372547, FRGB(78, 86, 107)));
    p.addKey(Key(0.3058823529411765, FRGB(79, 87, 108)));
    p.addKey(Key(0.30980392156862746, FRGB(80, 88, 108)));
    p.addKey(Key(0.3137254901960784, FRGB(81, 88, 108)));
    p.addKey(Key(0.3176470588235294, FRGB(82, 89, 108)));
    p.addKey(Key(0.3215686274509804, FRGB(83, 90, 108)));
    p.addKey(Key(0.3254901960784314, FRGB(84, 90, 108)));
    p.addKey(Key(0.32941176470588235, FRGB(85, 91, 108)));
    p.addKey(Key(0.3333333333333333, FRGB(86, 92, 108)));
    p.addKey(Key(0.33725490196078434, FRGB(87, 93, 109)));
    p.addKey(Key(0.3411764705882353, FRGB(88, 93, 109)));
    p.addKey(Key(0.34509803921568627, FRGB(89, 94, 109)));
    p.addKey(Key(0.34901960784313724, FRGB(90, 95, 109)));
    p.addKey(Key(0.35294117647058826, FRGB(91, 95, 109)));
    p.addKey(Key(0.3568627450980392, FRGB(92, 96, 109)));
    p.addKey(Key(0.3607843137254902, FRGB(93, 97, 110)));
    p.addKey(Key(0.36470588235294116, FRGB(94, 98, 110)));
    p.addKey(Key(0.3686274509803922, FRGB(95, 98, 110)));
    p.addKey(Key(0.37254901960784315, FRGB(95, 99, 110)));
    p.addKey(Key(0.3764705882352941, FRGB(96, 100, 110)));
    p.addKey(Key(0.3803921568627451, FRGB(97, 101, 111)));
    p.addKey(Key(0.3843137254901961, FRGB(98, 101, 111)));
    p.addKey(Key(0.38823529411764707, FRGB(99, 102, 111)));
    p.addKey(Key(0.39215686274509803, FRGB(100, 103, 111)));
    p.addKey(Key(0.396078431372549, FRGB(101, 103, 111)));
    p.addKey(Key(0.4, FRGB(102, 104, 112)));
    p.addKey(Key(0.403921568627451, FRGB(103, 105, 112)));
    p.addKey(Key(0.40784313725490196, FRGB(104, 106, 112)));
    p.addKey(Key(0.4117647058823529, FRGB(104, 106, 112)));
    p.addKey(Key(0.41568627450980394, FRGB(105, 107, 113)));
    p.addKey(Key(0.4196078431372549, FRGB(106, 108, 113)));
    p.addKey(Key(0.4235294117647059, FRGB(107, 109, 113)));
    p.addKey(Key(0.42745098039215684, FRGB(108, 109, 114)));
    p.addKey(Key(0.43137254901960786, FRGB(109, 110, 114)));
    p.addKey(Key(0.43529411764705883, FRGB(110, 111, 114)));
    p.addKey(Key(0.4392156862745098, FRGB(111, 111, 114)));
    p.addKey(Key(0.44313725490196076, FRGB(111, 112, 115)));
    p.addKey(Key(0.4470588235294118, FRGB(112, 113, 115)));
    p.addKey(Key(0.45098039215686275, FRGB(113, 114, 115)));
    p.addKey(Key(0.4549019607843137, FRGB(114, 114, 116)));
    p.addKey(Key(0.4588235294117647, FRGB(115, 115, 116)));
    p.addKey(Key(0.4627450980392157, FRGB(116, 116, 117)));
    p.addKey(Key(0.4666666666666667, FRGB(117, 117, 117)));
    p.addKey(Key(0.47058823529411764, FRGB(117, 117, 117)));
    p.addKey(Key(0.4745098039215686, FRGB(118, 118, 118)));
    p.addKey(Key(0.47843137254901963, FRGB(119, 119, 118)));
    p.addKey(Key(0.4823529411764706, FRGB(120, 120, 118)));
    p.addKey(Key(0.48627450980392156, FRGB(121, 120, 119)));
    p.addKey(Key(0.49019607843137253, FRGB(122, 121, 119)));
    p.addKey(Key(0.49411764705882355, FRGB(123, 122, 119)));
    p.addKey(Key(0.4980392156862745, FRGB(123, 123, 120)));
    p.addKey(Key(0.5019607843137255, FRGB(124, 123, 120)));
    p.addKey(Key(0.5058823529411764, FRGB(125, 124, 120)));
    p.addKey(Key(0.5098039215686274, FRGB(126, 125, 120)));
    p.addKey(Key(0.5137254901960784, FRGB(127, 126, 120)));
    p.addKey(Key(0.5176470588235295, FRGB(128, 126, 120)));
    p.addKey(Key(0.5215686274509804, FRGB(129, 127, 120)));
    p.addKey(Key(0.5254901960784314, FRGB(130, 128, 120)));
    p.addKey(Key(0.5294117647058824, FRGB(131, 129, 120)));
    p.addKey(Key(0.5333333333333333, FRGB(132, 129, 120)));
    p.addKey(Key(0.5372549019607843, FRGB(133, 130, 120)));
    p.addKey(Key(0.5411764705882353, FRGB(134, 131, 120)));
    p.addKey(Key(0.5450980392156862, FRGB(135, 132, 120)));
    p.addKey(Key(0.5490196078431373, FRGB(136, 133, 120)));
    p.addKey(Key(0.5529411764705883, FRGB(137, 133, 120)));
    p.addKey(Key(0.5568627450980392, FRGB(138, 134, 120)));
    p.addKey(Key(0.5607843137254902, FRGB(139, 135, 120)));
    p.addKey(Key(0.5647058823529412, FRGB(140, 136, 120)));
    p.addKey(Key(0.5686274509803921, FRGB(141, 136, 120)));
    p.addKey(Key(0.5725490196078431, FRGB(142, 137, 120)));
    p.addKey(Key(0.5764705882352941, FRGB(143, 138, 120)));
    p.addKey(Key(0.5803921568627451, FRGB(144, 139, 120)));
    p.addKey(Key(0.5843137254901961, FRGB(145, 140, 120)));
    p.addKey(Key(0.5882352941176471, FRGB(146, 140, 120)));
    p.addKey(Key(0.592156862745098, FRGB(147, 141, 120)));
    p.addKey(Key(0.596078431372549, FRGB(148, 142, 120)));
    p.addKey(Key(0.6, FRGB(149, 143, 120)));
    p.addKey(Key(0.6039215686274509, FRGB(150, 143, 119)));
    p.addKey(Key(0.6078431372549019, FRGB(151, 144, 119)));
    p.addKey(Key(0.611764705882353, FRGB(152, 145, 119)));
    p.addKey(Key(0.615686274509804, FRGB(153, 146, 119)));
    p.addKey(Key(0.6196078431372549, FRGB(154, 147, 119)));
    p.addKey(Key(0.6235294117647059, FRGB(155, 147, 119)));
    p.addKey(Key(0.6274509803921569, FRGB(156, 148, 119)));
    p.addKey(Key(0.6313725490196078, FRGB(157, 149, 119)));
    p.addKey(Key(0.6352941176470588, FRGB(158, 150, 118)));
    p.addKey(Key(0.6392156862745098, FRGB(159, 151, 118)));
    p.addKey(Key(0.6431372549019608, FRGB(160, 152, 118)));
    p.addKey(Key(0.6470588235294118, FRGB(161, 152, 118)));
    p.addKey(Key(0.6509803921568628, FRGB(162, 153, 118)));
    p.addKey(Key(0.6549019607843137, FRGB(163, 154, 117)));
    p.addKey(Key(0.6588235294117647, FRGB(164, 155, 117)));
    p.addKey(Key(0.6627450980392157, FRGB(165, 156, 117)));
    p.addKey(Key(0.6666666666666666, FRGB(166, 156, 117)));
    p.addKey(Key(0.6705882352941176, FRGB(167, 157, 117)));
    p.addKey(Key(0.6745098039215687, FRGB(168, 158, 116)));
    p.addKey(Key(0.6784313725490196, FRGB(169, 159, 116)));
    p.addKey(Key(0.6823529411764706, FRGB(170, 160, 116)));
    p.addKey(Key(0.6862745098039216, FRGB(171, 161, 116)));
    p.addKey(Key(0.6901960784313725, FRGB(172, 161, 115)));
    p.addKey(Key(0.6941176470588235, FRGB(173, 162, 115)));
    p.addKey(Key(0.6980392156862745, FRGB(174, 163, 115)));
    p.addKey(Key(0.7019607843137254, FRGB(175, 164, 115)));
    p.addKey(Key(0.7058823529411765, FRGB(176, 165, 114)));
    p.addKey(Key(0.7098039215686275, FRGB(177, 166, 114)));
    p.addKey(Key(0.7137254901960784, FRGB(178, 166, 114)));
    p.addKey(Key(0.7176470588235294, FRGB(180, 167, 113)));
    p.addKey(Key(0.7215686274509804, FRGB(181, 168, 113)));
    p.addKey(Key(0.7254901960784313, FRGB(182, 169, 113)));
    p.addKey(Key(0.7294117647058823, FRGB(183, 170, 112)));
    p.addKey(Key(0.7333333333333333, FRGB(184, 171, 112)));
    p.addKey(Key(0.7372549019607844, FRGB(185, 171, 112)));
    p.addKey(Key(0.7411764705882353, FRGB(186, 172, 111)));
    p.addKey(Key(0.7450980392156863, FRGB(187, 173, 111)));
    p.addKey(Key(0.7490196078431373, FRGB(188, 174, 110)));
    p.addKey(Key(0.7529411764705882, FRGB(189, 175, 110)));
    p.addKey(Key(0.7568627450980392, FRGB(190, 176, 110)));
    p.addKey(Key(0.7607843137254902, FRGB(191, 177, 109)));
    p.addKey(Key(0.7647058823529411, FRGB(192, 177, 109)));
    p.addKey(Key(0.7686274509803922, FRGB(193, 178, 108)));
    p.addKey(Key(0.7725490196078432, FRGB(194, 179, 108)));
    p.addKey(Key(0.7764705882352941, FRGB(195, 180, 108)));
    p.addKey(Key(0.7803921568627451, FRGB(197, 181, 107)));
    p.addKey(Key(0.7843137254901961, FRGB(198, 182, 107)));
    p.addKey(Key(0.788235294117647, FRGB(199, 183, 106)));
    p.addKey(Key(0.792156862745098, FRGB(200, 184, 106)));
    p.addKey(Key(0.796078431372549, FRGB(201, 184, 105)));
    p.addKey(Key(0.8, FRGB(202, 185, 105)));
    p.addKey(Key(0.803921568627451, FRGB(203, 186, 104)));
    p.addKey(Key(0.807843137254902, FRGB(204, 187, 104)));
    p.addKey(Key(0.8117647058823529, FRGB(205, 188, 103)));
    p.addKey(Key(0.8156862745098039, FRGB(206, 189, 103)));
    p.addKey(Key(0.8196078431372549, FRGB(208, 190, 102)));
    p.addKey(Key(0.8235294117647058, FRGB(209, 191, 102)));
    p.addKey(Key(0.8274509803921568, FRGB(210, 192, 101)));
    p.addKey(Key(0.8313725490196079, FRGB(211, 192, 101)));
    p.addKey(Key(0.8352941176470589, FRGB(212, 193, 100)));
    p.addKey(Key(0.8392156862745098, FRGB(213, 194, 99)));
    p.addKey(Key(0.8431372549019608, FRGB(214, 195, 99)));
    p.addKey(Key(0.8470588235294118, FRGB(215, 196, 98)));
    p.addKey(Key(0.8509803921568627, FRGB(216, 197, 97)));
    p.addKey(Key(0.8549019607843137, FRGB(217, 198, 97)));
    p.addKey(Key(0.8588235294117647, FRGB(219, 199, 96)));
    p.addKey(Key(0.8627450980392157, FRGB(220, 200, 96)));
    p.addKey(Key(0.8666666666666667, FRGB(221, 201, 95)));
    p.addKey(Key(0.8705882352941177, FRGB(222, 202, 94)));
    p.addKey(Key(0.8745098039215686, FRGB(223, 203, 93)));
    p.addKey(Key(0.8784313725490196, FRGB(224, 203, 93)));
    p.addKey(Key(0.8823529411764706, FRGB(225, 204, 92)));
    p.addKey(Key(0.8862745098039215, FRGB(227, 205, 91)));
    p.addKey(Key(0.8901960784313725, FRGB(228, 206, 91)));
    p.addKey(Key(0.8941176470588236, FRGB(229, 207, 90)));
    p.addKey(Key(0.8980392156862745, FRGB(230, 208, 89)));
    p.addKey(Key(0.9019607843137255, FRGB(231, 209, 88)));
    p.addKey(Key(0.9058823529411765, FRGB(232, 210, 87)));
    p.addKey(Key(0.9098039215686274, FRGB(233, 211, 86)));
    p.addKey(Key(0.9137254901960784, FRGB(235, 212, 86)));
    p.addKey(Key(0.9176470588235294, FRGB(236, 213, 85)));
    p.addKey(Key(0.9215686274509803, FRGB(237, 214, 84)));
    p.addKey(Key(0.9254901960784314, FRGB(238, 215, 83)));
    p.addKey(Key(0.9294117647058824, FRGB(239, 216, 82)));
    p.addKey(Key(0.9333333333333333, FRGB(240, 217, 81)));
    p.addKey(Key(0.9372549019607843, FRGB(241, 218, 80)));
    p.addKey(Key(0.9411764705882353, FRGB(243, 219, 79)));
    p.addKey(Key(0.9450980392156862, FRGB(244, 220, 78)));
    p.addKey(Key(0.9490196078431372, FRGB(245, 221, 77)));
    p.addKey(Key(0.9529411764705882, FRGB(246, 222, 76)));
    p.addKey(Key(0.9568627450980393, FRGB(247, 223, 75)));
    p.addKey(Key(0.9607843137254902, FRGB(249, 224, 73)));
    p.addKey(Key(0.9647058823529412, FRGB(250, 224, 72)));
    p.addKey(Key(0.9686274509803922, FRGB(251, 225, 71)));
    p.addKey(Key(0.9725490196078431, FRGB(252, 226, 70)));
    p.addKey(Key(0.9764705882352941, FRGB(253, 227, 69)));
    p.addKey(Key(0.9803921568627451, FRGB(255, 228, 67)));
    p.addKey(Key(0.984313725490196, FRGB(255, 229, 66)));
    p.addKey(Key(0.9882352941176471, FRGB(255, 230, 66)));
    p.addKey(Key(0.9921568627450981, FRGB(255, 231, 67)));
    p.addKey(Key(0.996078431372549, FRGB(255, 232, 68)));
    p.addKey(Key(1.0, FRGB(255, 233, 69)));
    return p;
  }

private:
  std::vector<Key> keys;
};

#endif
